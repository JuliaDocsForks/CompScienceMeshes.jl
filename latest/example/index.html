<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Example - CompScienceMeshes.jl</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../assets/Documenter.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">CompScienceMeshes.jl</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li >
                        <a href="../charts/">Charts</a>
                    </li>
                    <li >
                        <a href="../neighborhood/">Neighborhoods</a>
                    </li>
                    <li class="active">
                        <a href="./">Example</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../neighborhood/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/krcools/CompScienceMeshes.jl">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#computing-the-genus-of-a-punctured-plane">Computing the genus of a punctured plane</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a id='Computing-the-genus-of-a-punctured-plane-1'></a></p>
<h2 id="computing-the-genus-of-a-punctured-plane">Computing the genus of a punctured plane</h2>
<p>In this example we will compute the genus of a punctured plane. In other words we are interested in the dimension of the 1st homology space.</p>
<p>First we need to create the mesh. Typically this is done in an external mesher such as <code>gmsh</code> but here we will construct it from scratch.</p>
<pre><code class="julia">using CompScienceMeshes

h = 1/6
rect = meshrectangle(1.0, 1.0, h, 3)
hole = meshrectangle(1/3, 1/3, h, 3)
translate!(hole, point(1/3, 1/3, 0))

pred = overlap_gpredicate(hole)
all_faces = submesh(c-&gt;!pred(chart(rect,c)), rect)
</code></pre>

<pre><code>WARNING: min{T1 &lt;: Real, T2 &lt;: Real}(x::AbstractArray{T1}, y::AbstractArray{T2}) is deprecated, use min.(x, y) instead.
Stacktrace:
 [1] depwarn(::String, ::Symbol) at ./deprecated.jl:70
 [2] min(::SVector{3,Float64}, ::SVector{3,Float64}) at ./deprecated.jl:57
 [3] @generated body at /home/travis/.julia/v0.7/StaticArrays/src/mapreduce.jl:73 [inlined]
 [4] _mapreduce at /home/travis/.julia/v0.7/StaticArrays/src/mapreduce.jl:65 [inlined]
 [5] mapreduce at /home/travis/.julia/v0.7/StaticArrays/src/mapreduce.jl:57 [inlined]
 [6] reduce at /home/travis/.julia/v0.7/StaticArrays/src/mapreduce.jl:156 [inlined]
 [7] minimum at /home/travis/.julia/v0.7/StaticArrays/src/mapreduce.jl:178 [inlined]
 [8] boundingbox(::CompScienceMeshes.Simplex{3,2,1,3,Float64}) at /home/travis/.julia/v0.7/CompScienceMeshes/src/submesh.jl:66
 [9] (::CompScienceMeshes.#pred#67{CompScienceMeshes.Mesh{3,3,Float64}})(::CompScienceMeshes.Simplex{3,2,1,3,Float64}) at /home/travis/.julia/v0.7/CompScienceMeshes/src/submesh.jl:108
 [10] submesh(::ex-ex1.##1#2, ::CompScienceMeshes.Mesh{3,3,Float64}) at /home/travis/.julia/v0.7/CompScienceMeshes/src/submesh.jl:19
 [11] eval(::Module, ::Any) at ./boot.jl:236
 [12] #8 at /home/travis/.julia/v0.7/Documenter/src/Expanders.jl:459 [inlined]
 [13] cd(::Documenter.Expanders.##8#10, ::String) at ./file.jl:70
 [14] withoutput(::Documenter.Expanders.##7#9{Documenter.Documents.Page}) at /home/travis/.julia/v0.7/Documenter/src/Utilities/Utilities.jl:587
 [15] runner(::Type{Documenter.Expanders.ExampleBlocks}, ::Base.Markdown.Code, ::Documenter.Documents.Page, ::Documenter.Documents.Document) at /home/travis/.julia/v0.7/Documenter/src/Expanders.jl:457
 [16] @generated body at /home/travis/.julia/v0.7/Documenter/src/Selectors.jl:0 [inlined]
 [17] dispatch(::Type{Documenter.Expanders.ExpanderPipeline}, ::Base.Markdown.Code, ::Documenter.Documents.Page, ::Documenter.Documents.Document) at /home/travis/.julia/v0.7/Documenter/src/Selectors.jl:164
 [18] expand(::Documenter.Documents.Document) at /home/travis/.julia/v0.7/Documenter/src/Expanders.jl:29
 [19] @generated body at /home/travis/.julia/v0.7/Documenter/src/Selectors.jl:0 [inlined]
 [20] dispatch(::Type{Documenter.Builder.DocumentPipeline}, ::Documenter.Documents.Document) at /home/travis/.julia/v0.7/Documenter/src/Selectors.jl:164
 [21] cd(::Documenter.##2#3{Documenter.Documents.Document}, ::String) at ./file.jl:70
 [22] #makedocs#1(::Bool, ::Array{Any,1}, ::Function) at /home/travis/.julia/v0.7/Documenter/src/Documenter.jl:198
 [23] (::Documenter.#kw##makedocs)(::Array{Any,1}, ::Documenter.#makedocs) at ./&lt;missing&gt;:0
 [24] include_from_node1(::Module, ::String) at ./loading.jl:549
 [25] include(::Module, ::String) at ./sysimg.jl:14
 [26] include(::String) at ./client.jl:376
 [27] eval(::Module, ::Any) at ./boot.jl:236
 [28] process_options(::Base.JLOptions) at ./client.jl:293
 [29] _start() at ./client.jl:378
while loading /home/travis/.julia/v0.7/CompScienceMeshes/docs/make.jl, in expression starting on line 3
</code></pre>

<p>Note that we started out creating a large rectangular mesh and a small one. Next we translate the small one to the center of the large one. We can use <code>submesh</code> to select the part of the mesh that does not coincide with the hole by providing an appropriate predicate.</p>
<p>The tricky bit is that in order to get the correct number, we need to discard any vertices and edges that lie on the boundary of the structure. To do this we first retrieve a list of all edges and vertices by again calling <code>skeleton</code> with the appropriate dimension. In a next step we select out those vertices and edges that are not on the boundary.</p>
<p><em>Note</em>: <code>overlap_predicate</code> generates a predicate that takes cells of the same dimensionality as its argument. This means that we first need the 0-skeleton of the boundary before we can create a predicate that takes vertices of the original mesh.</p>
<pre><code class="julia">all_edges = skeleton(all_faces, 1)
all_verts = skeleton(all_faces, 0)

bnd_edges = boundary(all_faces)
bnd_verts = skeleton(bnd_edges, 0)

onbnd1 = overlap_gpredicate(bnd_edges)
onbnd0 = overlap_gpredicate(bnd_verts)

interior_edges = submesh(c -&gt; !onbnd1(chart(all_edges,c)), all_edges)
interior_verts = submesh(c -&gt; !onbnd0(chart(all_verts,c)), all_verts)
</code></pre>

<p>The set of interior_edges looks like this.</p>
<p><img alt="" src="../assets/edges.png" /></p>
<p>The co-boundary maps are simply the connectivity matrices between cells of the dimension 0-1 and 1-2, respectively. The genus can be computed by simply using the rank nullity theorem, but as part of this example we use the <code>rank</code> and <code>nullspace</code> on the connectivty matrices. This if desired can provide a representative of the cohomology space.</p>
<pre><code class="julia">D0 = connectivity(interior_verts, interior_edges)
D1 = connectivity(interior_edges, all_faces)

nullity(A) = size(A,2) - rank(A')
genus = nullity(full(D1)) - rank(full(D0))
</code></pre>

<pre><code>1
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../assets/mathjaxhelper.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
